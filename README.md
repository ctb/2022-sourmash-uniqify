# iterative greedy clustering of sourmash signatures

sourmash issue: https://github.com/dib-lab/sourmash/issues/1251

## usage:

```
./sourmash-uniqify [ multiple filenames, directory paths, or sourmash databases ]
```

Optional arguments:
* --prefix - output prefix, e.g. `--prefix=output_dir/clustme` will put all output in `output_dir/clustme.*`
* --threshold - Jaccard similarity threshold above which two signatures will be clustered. default 0.2

sourmash-uniqify shuffles the sequences using a random number generator seeded with `--seed`.  by default, this is fixed at 1, so unless you change the seed you will always get the same output for the same input arguments. set --seed to 0 to change the seed each time.

you can specify -k/--ksize and --moltype to load specific types of signatures; default is k=31, DNA.

note, all signatures loaded must be compatible for comparison in terms of scaled/num; right now there is no way to pick just the scaled signatures, or just the num signatures.

## output:


### summary CSV

the summary CSV output at prefix+'.summary.csv' contains the following columns:

- 'origin_path' - the file or path from which the signature was loaded (corresponds to command-line arguments)
- 'name' - signature name, as generated by `sourmash sketch`. may be duplicate.
- 'filename' - filename of source sequences, as generated by `sourmash sketch`. may be duplicate.
- 'md5sum' - ~unique hexadecimal string for each signature. should be unique.
- 'cluster' - cluster number (integer).
- 'member_type' - either 'founder' or 'member'. If 'founder', this is the signature to which all others were clustered; if 'member', this is a duplicate signature to the founder.

### other notes

this uses an n-squared algorithm so you probably don't want to run this on more than a few thousand signatures.

it's also kinda brute-force dumb, for simplicity of prototype implementation.

file [an issue in the sourmash tracker](https://github.com/dib-lab/sourmash/issues) if you'd like it to scale better.